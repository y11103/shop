(window.webpackJsonp = window.webpackJsonp || []).push([['user'], { 2666: function (e, t, r) { 'use strict'; r.r(t); var a = function () { var e = this; var t = e.$createElement; var r = e._self._c || t; return r('div', { staticClass: 'users' }, [r('breaks', { attrs: { first: '用户管理', scenter: '用户列表' } }), r('el-card', { staticClass: 'box-card' }, [r('div', { staticClass: 'inpnt-type' }, [r('el-input', { staticClass: 'input-with-select', attrs: { placeholder: '请输入内容' }, model: { value: e.params.query, callback: function (t) { e.$set(e.params, 'query', t) }, expression: 'params.query' } }, [r('el-button', { attrs: { slot: 'append', icon: 'el-icon-search' }, on: { click: e.getUsers }, slot: 'append' })], 1), r('el-button', { attrs: { type: 'primary' }, on: { click: function (t) { e.dialogFormVisible = !0 } } }, [e._v('添加用户')]), r('el-dialog', { attrs: { title: '添加用户', visible: e.dialogFormVisible }, on: { 'update:visible': function (t) { e.dialogFormVisible = t }, close: e.close } }, [r('el-form', { ref: 'ruleAdd', attrs: { model: e.form, rules: e.rules } }, [r('el-form-item', { attrs: { label: '用户名', 'label-width': e.formLabelWidth, prop: 'username' } }, [r('el-input', { attrs: { autocomplete: 'off' }, model: { value: e.form.username, callback: function (t) { e.$set(e.form, 'username', t) }, expression: 'form.username' } })], 1), r('el-form-item', { attrs: { label: '密码', 'label-width': e.formLabelWidth, prop: 'password' } }, [r('el-input', { attrs: { type: 'password', autocomplete: 'off' }, model: { value: e.form.password, callback: function (t) { e.$set(e.form, 'password', t) }, expression: 'form.password' } })], 1), r('el-form-item', { attrs: { label: '邮箱', 'label-width': e.formLabelWidth, prop: 'email' } }, [r('el-input', { attrs: { autocomplete: 'off' }, model: { value: e.form.email, callback: function (t) { e.$set(e.form, 'email', t) }, expression: 'form.email' } })], 1), r('el-form-item', { attrs: { label: '电话', 'label-width': e.formLabelWidth, prop: 'mobile' } }, [r('el-input', { attrs: { autocomplete: 'off' }, model: { value: e.form.mobile, callback: function (t) { e.$set(e.form, 'mobile', t) }, expression: 'form.mobile' } })], 1)], 1), r('div', { staticClass: 'dialog-footer', attrs: { slot: 'footer' }, slot: 'footer' }, [r('el-button', { on: { click: function (t) { e.dialogFormVisible = !1 } } }, [e._v('取 消')]), r('el-button', { attrs: { type: 'primary' }, on: { click: e.userpost } }, [e._v('确 定')])], 1)], 1)], 1), r('el-table', { staticStyle: { width: '100%' }, attrs: { data: e.tableData, border: '' } }, [r('el-table-column', { attrs: { label: '#', type: 'index', width: '180' } }), r('el-table-column', { attrs: { label: '姓名', width: '180', prop: 'username' } }), r('el-table-column', { attrs: { label: '邮箱', width: '180', prop: 'email' } }), r('el-table-column', { attrs: { label: '电话', width: '180', prop: 'mobile' } }), r('el-table-column', { attrs: { label: '角色', width: '180', prop: 'role_name' } }), r('el-table-column', { attrs: { label: '状态', width: '180' }, scopedSlots: e._u([{ key: 'default', fn: function (t) { return [r('el-switch', { attrs: { 'active-color': '#13ce66', 'inactive-color': '#ccc' }, on: { change: function (r) { return e.checkgloba(t.row) } }, model: { value: t.row.mg_state, callback: function (r) { e.$set(t.row, 'mg_state', r) }, expression: 'scoped.row.mg_state' } })] } }]) }), r('el-table-column', { attrs: { label: '操作' }, scopedSlots: e._u([{ key: 'default', fn: function (t) { return [r('el-button', { attrs: { type: 'primary', icon: 'el-icon-edit', size: 'mini' }, on: { click: function (r) { return e.updateById(t.row) } } }), r('el-button', { attrs: { type: 'danger', icon: 'el-icon-delete', size: 'mini' }, on: { click: function (r) { return e.deleteByid(t.row.id) } } }), r('el-button', { attrs: { type: 'warning', icon: 'el-icon-setting', size: 'mini' }, on: { click: function (r) { return e.AssignRoles(t.row) } } })] } }]) })], 1), r('el-pagination', { attrs: { 'page-sizes': [1, 2, 5, 10], 'page-size': e.params.pagesize, layout: 'total, sizes, prev, pager, next, jumper', total: e.totals }, on: { 'size-change': e.handleSizeChange, 'current-change': e.handleCurrentChange } }), r('el-dialog', { attrs: { title: '编辑用户', visible: e.updateFormVisible }, on: { 'update:visible': function (t) { e.updateFormVisible = t }, close: e.close } }, [r('el-form', { ref: 'ruleUpdate', attrs: { model: e.updateFrom, rules: e.rules } }, [r('el-form-item', { attrs: { label: '用户名', 'label-width': e.formLabelWidth, prop: 'username' } }, [r('el-input', { attrs: { disabled: !0, autocomplete: 'off' }, model: { value: e.updateFrom.username, callback: function (t) { e.$set(e.updateFrom, 'username', t) }, expression: 'updateFrom.username' } })], 1), r('el-form-item', { attrs: { label: '邮箱', 'label-width': e.formLabelWidth, prop: 'email' } }, [r('el-input', { attrs: { autocomplete: 'off' }, model: { value: e.updateFrom.email, callback: function (t) { e.$set(e.updateFrom, 'email', t) }, expression: 'updateFrom.email' } })], 1), r('el-form-item', { attrs: { label: '电话', 'label-width': e.formLabelWidth, prop: 'mobile' } }, [r('el-input', { attrs: { autocomplete: 'off' }, model: { value: e.updateFrom.mobile, callback: function (t) { e.$set(e.updateFrom, 'mobile', t) }, expression: 'updateFrom.mobile' } })], 1)], 1), r('div', { staticClass: 'dialog-footer', attrs: { slot: 'footer' }, slot: 'footer' }, [r('el-button', { on: { click: function (t) { e.updateFormVisible = !1 } } }, [e._v('取 消')]), r('el-button', { attrs: { type: 'primary' }, on: { click: e.enter } }, [e._v('确 定')])], 1)], 1), r('el-dialog', { ref: 'form', attrs: { title: '分配角色', visible: e.uaterUser, model: e.formRout }, on: { 'update:visible': function (t) { e.uaterUser = t }, close: e.close } }, [r('el-form', { ref: 'ruleSelect', attrs: { model: e.form, 'label-width': '100px' } }, [r('el-form-item', { attrs: { label: '当前的用户：' } }, [e._v(' ' + e._s(e.formRout.username) + ' ')]), r('el-form-item', { attrs: { label: '当前的角色：' } }, [e._v(' ' + e._s(e.formRout.role_name) + ' ')]), r('el-form-item', { attrs: { label: '分配新角色：' }, on: { close: e.close } }, [r('el-select', { attrs: { placeholder: '请选择' }, model: { value: e.rid, callback: function (t) { e.rid = t }, expression: 'rid' } }, e._l(e.formRout, function (t) { return r('el-option', { key: t.id, attrs: { label: t.roleDesc }, model: { value: t.id, callback: function (r) { e.$set(t, 'id', r) }, expression: 'item.id' } }) }), 1)], 1)], 1), r('div', { staticClass: 'dialog-footer', attrs: { slot: 'footer' }, slot: 'footer' }, [r('el-button', { on: { click: function (t) { e.uaterUser = !1 } } }, [e._v('取 消')]), r('el-button', { attrs: { type: 'primary' }, on: { click: e.enterRole } }, [e._v('确 定')])], 1)], 1)], 1)], 1) }; var n = []; var s = r('5530'); var o = r('1da1'); var i = (r('99af'), r('96cf'), { data: function () { var e = function (e, t, r) { var a = /\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/; if (!a.test(t)) return r(new Error('邮箱格式不正确')); r() }; var t = function (e, t, r) { var a = /^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/; if (!a.test(t)) return r(new Error('手机号不正确')); r() }; return { tableData: [], formRout: {}, totals: 0, params: { query: '', pagenum: 1, pagesize: 2 }, dialogFormVisible: !1, updateFormVisible: !1, uaterUser: !1, form: { username: '', password: '', email: '', mobile: '' }, updateFrom: { username: '', email: '', mobile: '' }, rid: '', rules: { username: [{ required: !0, message: '请输入登录名称', trigger: 'blur' }, { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }], password: [{ required: !0, message: '请输入登录密码', trigger: 'blur' }, { min: 6, max: 12, message: '长度在 6 到 12 个字符', trigger: 'blur' }], email: [{ required: !0, message: '请输入邮箱', trigger: 'blur' }, { validator: e, trigger: 'blur' }], mobile: [{ required: !0, message: '请输入邮箱', trigger: 'blur' }, { validator: t, trigger: 'blur' }] }, formLabelWidth: '80px' } }, created: function () { this.getUsers() }, methods: { getUsers: function () { var e = this; return Object(o.a)(regeneratorRuntime.mark(function t () { var r; return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:return t.next = 2, e.$http('/users', { params: e.params }); case 2:r = t.sent, e.tableData = r.data.data.users, e.totals = r.data.data.total; case 5:case 'end':return t.stop() } }, t) }))() }, handleSizeChange: function (e) { this.params.pagesize = e, this.getUsers() }, handleCurrentChange: function (e) { this.params.pagenum = e, this.getUsers() }, userpost: function () { var e = this; this.$refs.ruleAdd.validate(function () { var t = Object(o.a)(regeneratorRuntime.mark(function t (r) { var a; return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:if (!r) { t.next = 7; break } return t.next = 3, e.$http.post('/users', e.form); case 3:a = t.sent, a.data.meta.status !== 201 ? e.$message.error(a.data.meta.msg) : (e.$message({ message: a.data.meta.msg, type: 'success' }), e.dialogFormVisible = !1, e.$refs.ruleAdd.resetFields()), t.next = 8; break; case 7:return t.abrupt('return', !1); case 8:case 'end':return t.stop() } }, t) })); return function (e) { return t.apply(this, arguments) } }()) }, checkgloba: function (e) { var t = this; return Object(o.a)(regeneratorRuntime.mark(function r () { var a; return regeneratorRuntime.wrap(function (r) { while (1) switch (r.prev = r.next) { case 0:return r.next = 2, t.$http.put('users/'.concat(e.id, '/state/').concat(e.mg_state)); case 2:a = r.sent, a.data.meta.status !== 200 ? t.$message.error(a.data.meta.msg) : (t.$message({ message: a.data.meta.msg, type: 'success' }), t.getUsers()); case 4:case 'end':return r.stop() } }, r) }))() }, updateById: function (e) { var t = this; return Object(o.a)(regeneratorRuntime.mark(function r () { var a; return regeneratorRuntime.wrap(function (r) { while (1) switch (r.prev = r.next) { case 0:return r.next = 2, t.$http('/users/' + e.id); case 2:a = r.sent, t.updateFormVisible = !0, t.updateFrom = a.data.data; case 5:case 'end':return r.stop() } }, r) }))() }, enter: function () { var e = this; return Object(o.a)(regeneratorRuntime.mark(function t () { return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:e.$refs.ruleUpdate.validate(function () { var t = Object(o.a)(regeneratorRuntime.mark(function t (r) { var a; return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:if (!r) { t.next = 7; break } return t.next = 3, e.$http.put('/users/' + e.updateFrom.id, e.updateFrom); case 3:a = t.sent, a.data.meta.status !== 200 ? e.$message.error(a.data.meta.msg) : (e.$message({ message: a.data.meta.msg, type: 'success' }), e.updateFormVisible = !1), t.next = 8; break; case 7:return t.abrupt('return', !1); case 8:case 'end':return t.stop() } }, t) })); return function (e) { return t.apply(this, arguments) } }()); case 1:case 'end':return t.stop() } }, t) }))() }, deleteByid: function (e) { var t = this; this.$confirm('此操作将永久删除该用户, 是否继续?', '提示', { confirmButtonText: '确定', cancelButtonText: '取消', type: 'warning' }).then(Object(o.a)(regeneratorRuntime.mark(function r () { var a; return regeneratorRuntime.wrap(function (r) { while (1) switch (r.prev = r.next) { case 0:return r.next = 2, t.$http.delete('/users/' + e); case 2:a = r.sent, a.data.meta.status !== 200 ? t.$message.error(a.data.meta.msg) : (t.$message({ message: a.data.meta.msg, type: 'success' }), t.getUsers()); case 4:case 'end':return r.stop() } }, r) }))).catch(function (e) { return e }) }, AssignRoles: function (e) { var t = this; return Object(o.a)(regeneratorRuntime.mark(function r () { var a, n; return regeneratorRuntime.wrap(function (r) { while (1) switch (r.prev = r.next) { case 0:return r.next = 2, t.$http('/roles'); case 2:a = r.sent, n = a.data, t.formRout = Object(s.a)(Object(s.a)({}, e), n.data), t.uaterUser = !0; case 6:case 'end':return r.stop() } }, r) }))() }, enterRole: function () { var e = this; return Object(o.a)(regeneratorRuntime.mark(function t () { var r, a; return regeneratorRuntime.wrap(function (t) { while (1) switch (t.prev = t.next) { case 0:return t.next = 2, e.$http.put('users/'.concat(e.formRout.id, '/role'), { rid: e.rid }); case 2:r = t.sent, a = r.data, a.meta.status === 200 ? (e.$message({ message: a.meta.msg, type: 'success' }), e.uaterUser = !1) : e.$message.error(a.meta.msg); case 5:case 'end':return t.stop() } }, t) }))() }, close: function () { this.getUsers(), this.$refs.ruleSelect.resetFields() } } }); var l = i; var u = (r('a1be'), r('0c7c')); var c = Object(u.a)(l, a, n, !1, null, '4181a420', null); t.default = c.exports }, 5530: function (e, t, r) { 'use strict'; r.d(t, 'a', function () { return s }); r('b64b'), r('a4d3'), r('4de4'), r('e439'), r('159b'), r('dbb4'); function a (e, t, r) { return t in e ? Object.defineProperty(e, t, { value: r, enumerable: !0, configurable: !0, writable: !0 }) : e[t] = r, e } function n (e, t) { var r = Object.keys(e); if (Object.getOwnPropertySymbols) { var a = Object.getOwnPropertySymbols(e); t && (a = a.filter(function (t) { return Object.getOwnPropertyDescriptor(e, t).enumerable })), r.push.apply(r, a) } return r } function s (e) { for (var t = 1; t < arguments.length; t++) { var r = arguments[t] != null ? arguments[t] : {}; t % 2 ? n(Object(r), !0).forEach(function (t) { a(e, t, r[t]) }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(r)) : n(Object(r)).forEach(function (t) { Object.defineProperty(e, t, Object.getOwnPropertyDescriptor(r, t)) }) } return e } }, '99af': function (e, t, r) { 'use strict'; var a = r('23e7'); var n = r('d039'); var s = r('e8b5'); var o = r('861d'); var i = r('7b0b'); var l = r('50c4'); var u = r('8418'); var c = r('65f0'); var m = r('1dde'); var p = r('b622'); var d = r('2d00'); var f = p('isConcatSpreadable'); var b = 9007199254740991; var g = 'Maximum allowed index exceeded'; var h = d >= 51 || !n(function () { var e = []; return e[f] = !1, e.concat()[0] !== e }); var w = m('concat'); var v = function (e) { if (!o(e)) return !1; var t = e[f]; return void 0 !== t ? !!t : s(e) }; var y = !h || !w; a({ target: 'Array', proto: !0, forced: y }, { concat: function (e) { var t; var r; var a; var n; var s; var o = i(this); var m = c(o, 0); var p = 0; for (t = -1, a = arguments.length; t < a; t++) if (s = t === -1 ? o : arguments[t], v(s)) { if (n = l(s.length), p + n > b) throw TypeError(g); for (r = 0; r < n; r++, p++)r in s && u(m, p, s[r]) } else { if (p >= b) throw TypeError(g); u(m, p++, s) } return m.length = p, m } }) }, a1be: function (e, t, r) { 'use strict'; r('ab5f') }, ab5f: function (e, t, r) {}, b64b: function (e, t, r) { var a = r('23e7'); var n = r('7b0b'); var s = r('df75'); var o = r('d039'); var i = o(function () { s(1) }); a({ target: 'Object', stat: !0, forced: i }, { keys: function (e) { return s(n(e)) } }) }, dbb4: function (e, t, r) { var a = r('23e7'); var n = r('83ab'); var s = r('56ef'); var o = r('fc6a'); var i = r('06cf'); var l = r('8418'); a({ target: 'Object', stat: !0, sham: !n }, { getOwnPropertyDescriptors: function (e) { var t; var r; var a = o(e); var n = i.f; var u = s(a); var c = {}; var m = 0; while (u.length > m)r = n(a, t = u[m++]), void 0 !== r && l(c, t, r); return c } }) }, e439: function (e, t, r) { var a = r('23e7'); var n = r('d039'); var s = r('fc6a'); var o = r('06cf').f; var i = r('83ab'); var l = n(function () { o(1) }); var u = !i || l; a({ target: 'Object', stat: !0, forced: u, sham: !i }, { getOwnPropertyDescriptor: function (e, t) { return o(s(e), t) } }) } }])
// # sourceMappingURL=user.dcac1532.js.map
